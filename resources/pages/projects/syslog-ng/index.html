<article>
  <title>Syslog-ng projects</title>
</article>

<section>
  <p>
    As of this writing, there are two projects of mine built on
    <a href="https://www.balabit.com/network-security/syslog-ng/opensource-logging-system">syslog-ng</a>:
    the MongoDB
    <a href="/projects/syslog-ng/mongodb/">destination driver</a>, and
    <a href="http://mojology.madhouse-project.org/">mojology</a>, but
    being a syslog-ng OSE developer as part of my day job, I also
    maintain a fork of the syslog-ng code base, with a rather
    different layout than the official ones.
  </p>

  <p>
    I used to use a different branching and development model, one
    that often left a mess of branches in
    my <a href="https://github.com/algernon/syslog-ng">repository</a>:
    small, often one commit long branches lying around, where it's
    hard to figure out which need to be merged, and which need review.
  </p>

  <p>
    For the sake of easier merging, review and development, I changed
    the rules, and below is a short description about what one can
    find in my repository.
  </p>

  <h3><a name="branches/upstream">Upstream mirrors</a></h3>

  <p>
    I do not have a separate repository for the different versions of
    syslog-ng, I keep it all in one, because I find that more
    convenient. For this reason, I do not have a dedicated master
    branch either. Instead, there
    is <strong><a href="https://github.com/algernon/syslog-ng/tree/upstream/mirror/3.4">upstream/mirror/3.4</a></strong>
    and <strong><a href="https://github.com/algernon/syslog-ng/tree/upstream/mirror/3.3">upstream/mirror/3.3</a></strong>.
  </p>

  <p>
    These are the same as the master branches of the appropriate
    upstream syslog-ng repositories, their primary purpose is to
    provide a stable branching and rebasing point for me.
  </p>

  <h3><a name="branches/hotfix">Hotfix branches</a></h3>

  <p>
    Occassionally, I will have branches prefixed
    with <strong>hotfix/<em>VERSION</em></strong>, branched off of the
    matching upstream branch, to contain some small fixes only.
  </p>

  <p>
    These are created when the fix itself is not suitable for
    the <a href="#branches/merge-queue">merge queue</a> branch (see
    below) for one reason or the other, such as waiting for
    review. They're short lived usually, too: they're deleted once the
    fix has been either merged to a master branch, or into
    the <a href="#branches/merge-queue">merge queue</a>.
  </p>

  <h3><a name="branches/feature">Feature branches</a></h3>

  <p>
    Feature branches (prefixed
    with <strong>feature/<em>VERSION</em></strong>) are branched off
    of the <a href="#branches/merge-queue">merge queue</a>, and
    contain work in progress features, and are often rebased to
    collapse commits, or move to a newer base for easier merging
    later.
  </p>

  <p>
    Unlike <a href="#branches/hotfix">hotfix branches</a>, these tend
    to live long, and get rebased frequently.
  </p>

  <p>
    Once a feature is done, it will be merged into
    the <a href="#branches/merge-queue">merge queue</a>, but the
    feature branch is kept around until it is also present on a master
    branch. If a feature needs further work, that will be performed on
    a (rebased) feature branch, and then merged into the merge queue
    again. This process repeats until the feature is accepted, or
    rejected completely, at which point the branch is deleted.
  </p>

  <h3><a name="branches/merge-queue">The merge queue</a></h3>

  <p>
    More interesting than the branches before,
    the <strong>merge-queue/<em>VERSION</em></strong> branches contain
    patches I consider merge-ready. This branch replaces the former
    short-lived hotfix branches I used to have, but will also contain
    features, once they're complete.
  </p>

  <p>
    The branch is rebased onto the
    matching <a href="#branches/upstream">upstream branch</a> every
    time its contents get merged one way or the other.
  </p>

  <h3><a name="branches/sandbox">The sandbox</a></h3>

  <p>
    The sandbox (<strong>sandbox/<em>VERSION</em></strong>) is
    somewhat similar to the merge queue, except that it also contains
    experimental code: work in progress features, unreviewed fixes,
    and so on and so forth.
  </p>

  <p>
    It is the most rebased (onto
    the <a href="#branches/merge-queue">merge queue</a>) branch of it
    all, and possibly the most interesting too, as this is where all
    the shiny new things can be tested first.
  </p>

  <h3><a name="branches/packaging">Packaging branches</a></h3>

  <p>
    Packaging branches are where
    my <a href="/projects/debian/">packaging work</a> is done. They
    have
    their <a href="https://raw.github.com/algernon/syslog-ng/packaging/debian/3.4/debian/README.source">own
    documentation</a>, but in short: there are two kinds of packaging
    branches: the normal one, and the autobuilt one. The difference
    between the two is that the autobuilt branch has some features
    (multi-arch and systemd support as of this writing) disabled for
    portability reasons.
  </p>

  <p>
    So, these branches, which all have
    a <strong>packaging/debian/</strong> prefix contain
    the <kbd>debian/</kbd> directory, and a submodule that points to
    the syslog-ng version the packaging was made for.
  </p>
</section>
